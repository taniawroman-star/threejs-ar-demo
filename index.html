<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<title>Hello, world!</title>

	<!-- Load THREE.js FIRST -->
	<script src="https://cdn.jsdelivr.net/npm/three@0.165.0/build/three.min.js"></script>
</head>

<body style="margin:0; overflow:hidden;">

<!-- Vertex Shader -->
<script id="vertexShader" type="x-shader/x-vertex">
uniform float time;
varying vec2 textureUV;
void main() {
    textureUV = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
</script>

<!-- Fragment Shader -->
<script id="fragmentShader" type="x-shader/x-fragment">
uniform float time;
uniform sampler2D baseTexture;
varying vec2 textureUV;
void main() {
    gl_FragColor = texture2D(baseTexture, textureUV);
}
</script>

<!-- Your JS must be AFTER THREE.js -->
<script>

let scene, camera, renderer, mesh, clock;

init();
animate();

function init() {

	// Three.js is loaded here because script order is correct
	scene = new THREE.Scene();

	camera = new THREE.PerspectiveCamera(
		70,
		window.innerWidth / window.innerHeight,
		0.1,
		1000
	);
	camera.position.set(0, 2, 4);
	camera.lookAt(scene.position);

	scene.add(camera);

	const light = new THREE.AmbientLight(0xffffff, 1);
	scene.add(light);

	renderer = new THREE.WebGLRenderer({ antialias: true });
	renderer.setSize(window.innerWidth, window.innerHeight);
	document.body.appendChild(renderer.domElement);

	window.addEventListener('resize', onWindowResize);

	clock = new THREE.Clock();

	// Cube
	const geometry = new THREE.BoxGeometry(1, 1, 1);

	const texture = new THREE.TextureLoader().load("images/color-grid.png");

	const material = new THREE.MeshLambertMaterial({ map: texture });

	mesh = new THREE.Mesh(geometry, material);
	scene.add(mesh);
}

function animate() {
	requestAnimationFrame(animate);
	mesh.rotation.y += 0.01;
	renderer.render(scene, camera);
}

function onWindowResize() {
	camera.aspect = window.innerWidth / window.innerHeight;
	camera.updateProjectionMatrix();
	renderer.setSize(window.innerWidth, window.innerHeight);
}

</script>
</body>
</html>
